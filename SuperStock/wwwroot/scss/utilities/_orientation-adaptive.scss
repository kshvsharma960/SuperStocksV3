// ==========================================================================
// ORIENTATION ADAPTIVE - Orientation-aware layout optimizations
// ==========================================================================

// Base orientation classes
.orientation-adaptive {
  transition: all 0.3s ease-out;
}

// Portrait-specific optimizations
.portrait-optimize {
  @media (orientation: portrait) {
    // Stack elements vertically in portrait
    .orientation-stack {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-md);
    }
    
    // Optimize charts for portrait
    .chart-orientation-adaptive {
      .chart-container {
        height: 300px;
        margin-bottom: var(--spacing-lg);
      }
      
      .chart-controls {
        flex-wrap: wrap;
        gap: var(--spacing-sm);
      }
    }
    
    // Optimize tables for portrait
    .table-orientation-adaptive {
      .table-responsive {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }
      
      .table {
        min-width: 600px;
      }
    }
    
    // Optimize forms for portrait
    .form-orientation-adaptive {
      .form-row {
        flex-direction: column;
        
        .form-group {
          width: 100%;
          margin-bottom: var(--spacing-lg);
        }
      }
      
      .btn-group {
        flex-direction: column;
        
        .btn {
          width: 100%;
          margin-bottom: var(--spacing-sm);
          
          &:last-child {
            margin-bottom: 0;
          }
        }
      }
    }
    
    // Optimize modals for portrait
    .modal-orientation-adaptive {
      .modal-dialog {
        margin: 0;
        height: 100vh;
        max-width: 100%;
        
        .modal-content {
          height: 100%;
          border-radius: 0;
          display: flex;
          flex-direction: column;
        }
        
        .modal-body {
          flex: 1;
          overflow-y: auto;
          
          .row {
            flex-direction: column;
            
            .col-lg-8,
            .col-lg-4 {
              width: 100%;
              max-width: 100%;
            }
          }
        }
      }
    }
    
    // Optimize notifications for portrait
    .notification-orientation-adaptive {
      position: fixed;
      top: var(--spacing-lg);
      left: var(--spacing-md);
      right: var(--spacing-md);
      width: auto;
    }
  }
}

// Landscape-specific optimizations
.landscape-optimize {
  @media (orientation: landscape) {
    // Arrange elements horizontally in landscape
    .orientation-stack {
      display: flex;
      flex-direction: row;
      gap: var(--spacing-lg);
      align-items: flex-start;
    }
    
    // Optimize charts for landscape
    .chart-orientation-adaptive {
      .chart-container {
        height: 250px;
        margin-bottom: var(--spacing-md);
      }
      
      .chart-controls {
        justify-content: space-between;
        flex-wrap: nowrap;
      }
    }
    
    // Optimize tables for landscape
    .table-orientation-adaptive {
      .table-responsive {
        overflow-x: visible;
      }
      
      .table {
        min-width: auto;
      }
    }
    
    // Optimize forms for landscape
    .form-orientation-adaptive {
      .form-row {
        flex-direction: row;
        align-items: end;
        gap: var(--spacing-md);
        
        .form-group {
          flex: 1;
          margin-bottom: var(--spacing-md);
        }
      }
      
      .btn-group {
        flex-direction: row;
        
        .btn {
          width: auto;
          margin-right: var(--spacing-sm);
          margin-bottom: 0;
          
          &:last-child {
            margin-right: 0;
          }
        }
      }
    }
    
    // Optimize modals for landscape
    .modal-orientation-adaptive {
      .modal-dialog {
        margin: var(--spacing-md);
        height: calc(100vh - var(--spacing-xl));
        max-width: calc(100vw - var(--spacing-xl));
        
        .modal-content {
          height: 100%;
          border-radius: var(--radius-lg);
        }
        
        .modal-body {
          .row {
            flex-direction: row;
            
            .col-lg-8 {
              flex: 0 0 66.666667%;
              max-width: 66.666667%;
            }
            
            .col-lg-4 {
              flex: 0 0 33.333333%;
              max-width: 33.333333%;
            }
          }
        }
      }
    }
    
    // Optimize notifications for landscape
    .notification-orientation-adaptive {
      position: fixed;
      top: var(--spacing-md);
      right: var(--spacing-md);
      left: auto;
      width: 320px;
    }
    
    // Optimize for short landscape screens
    @media (max-height: 500px) {
      .page-header {
        padding: var(--spacing-sm) 0;
        
        .page-title {
          font-size: var(--font-size-lg);
        }
        
        .page-subtitle {
          display: none;
        }
      }
      
      .summary-cards {
        margin-bottom: var(--spacing-md);
        
        .card {
          padding: var(--spacing-sm) var(--spacing-md);
        }
      }
      
      .section-header {
        margin-bottom: var(--spacing-sm);
        
        h2 {
          font-size: var(--font-size-lg);
        }
      }
      
      .modal-header {
        padding: var(--spacing-sm) var(--spacing-md);
      }
      
      .modal-body {
        padding: var(--spacing-sm) var(--spacing-md);
      }
    }
  }
}

// Specific orientation angle optimizations
.landscape-left {
  // Optimizations for 90-degree rotation
  .orientation-indicator {
    transform: rotate(-90deg);
  }
}

.landscape-right {
  // Optimizations for -90-degree rotation
  .orientation-indicator {
    transform: rotate(90deg);
  }
}

// Navigation adaptations
.nav-orientation-adaptive {
  @media (orientation: portrait) {
    // Full-height sidebar in portrait
    &.sidebar {
      width: 100%;
      height: 100vh;
      
      .sidebar-content {
        padding: var(--spacing-lg);
      }
    }
  }
  
  @media (orientation: landscape) {
    // Compact sidebar in landscape
    &.sidebar {
      width: 280px;
      height: 100vh;
      
      .sidebar-content {
        padding: var(--spacing-md);
      }
    }
  }
}

// Dashboard adaptations
.dashboard-orientation-adaptive {
  @media (orientation: portrait) {
    .summary-cards {
      grid-template-columns: 1fr;
      gap: var(--spacing-md);
    }
    
    .dashboard-section {
      margin-bottom: var(--spacing-xl);
    }
  }
  
  @media (orientation: landscape) {
    .summary-cards {
      grid-template-columns: repeat(4, 1fr);
      gap: var(--spacing-lg);
    }
    
    .dashboard-section {
      margin-bottom: var(--spacing-lg);
    }
  }
}

// Trading interface adaptations
.trading-orientation-adaptive {
  @media (orientation: portrait) {
    .trading-panel {
      .order-form {
        .form-row {
          grid-template-columns: 1fr;
          gap: var(--spacing-md);
        }
      }
    }
  }
  
  @media (orientation: landscape) {
    .trading-panel {
      .order-form {
        .form-row {
          grid-template-columns: 1fr 1fr;
          gap: var(--spacing-lg);
        }
      }
    }
  }
}

// Watchlist adaptations
.watchlist-orientation-adaptive {
  @media (orientation: portrait) {
    .watchlist-grid {
      grid-template-columns: 1fr;
    }
    
    .watchlist-item {
      .stock-actions {
        margin-top: var(--spacing-md);
        justify-content: center;
      }
    }
  }
  
  @media (orientation: landscape) {
    .watchlist-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .watchlist-item {
      .stock-actions {
        margin-top: 0;
        justify-content: flex-end;
      }
    }
  }
}

// Leaderboard adaptations
.leaderboard-orientation-adaptive {
  @media (orientation: portrait) {
    .competition-stats {
      grid-template-columns: repeat(2, 1fr);
      gap: var(--spacing-md);
    }
    
    .podium {
      flex-direction: column;
      align-items: center;
    }
  }
  
  @media (orientation: landscape) {
    .competition-stats {
      grid-template-columns: repeat(4, 1fr);
      gap: var(--spacing-lg);
    }
    
    .podium {
      flex-direction: row;
      justify-content: center;
    }
  }
}

// Animation adaptations for orientation changes
.orientation-transition-smooth {
  * {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .chart-container,
  .table-container,
  .card,
  .modal-dialog {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
}

// Prevent layout shift during orientation change
.orientation-stable {
  .chart-container {
    min-height: 200px;
  }
  
  .table-container {
    min-height: 150px;
  }
  
  .card {
    min-height: 100px;
  }
}

// Orientation-aware spacing
.spacing-orientation-adaptive {
  @media (orientation: portrait) {
    padding: var(--spacing-lg) var(--spacing-md);
    margin-bottom: var(--spacing-xl);
  }
  
  @media (orientation: landscape) {
    padding: var(--spacing-md) var(--spacing-lg);
    margin-bottom: var(--spacing-lg);
  }
}

// Typography adaptations
.text-orientation-adaptive {
  @media (orientation: portrait) {
    font-size: var(--font-size-lg);
    line-height: var(--line-height-relaxed);
  }
  
  @media (orientation: landscape) and (max-height: 500px) {
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
  }
}

// Button adaptations
.btn-orientation-adaptive {
  @media (orientation: portrait) {
    width: 100%;
    padding: var(--spacing-md) var(--spacing-lg);
    margin-bottom: var(--spacing-sm);
  }
  
  @media (orientation: landscape) {
    width: auto;
    padding: var(--spacing-sm) var(--spacing-md);
    margin-right: var(--spacing-sm);
    margin-bottom: 0;
  }
}

// Input adaptations
.input-orientation-adaptive {
  @media (orientation: portrait) {
    width: 100%;
    margin-bottom: var(--spacing-md);
  }
  
  @media (orientation: landscape) {
    width: auto;
    flex: 1;
    margin-right: var(--spacing-md);
    margin-bottom: 0;
  }
}

// Grid adaptations
.grid-orientation-adaptive {
  @media (orientation: portrait) {
    grid-template-columns: 1fr;
    gap: var(--spacing-md);
  }
  
  @media (orientation: landscape) {
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--spacing-lg);
  }
}

// Flex adaptations
.flex-orientation-adaptive {
  @media (orientation: portrait) {
    flex-direction: column;
    align-items: stretch;
  }
  
  @media (orientation: landscape) {
    flex-direction: row;
    align-items: center;
  }
}

// Visibility adaptations
.visible-portrait {
  @media (orientation: landscape) {
    display: none !important;
  }
}

.visible-landscape {
  @media (orientation: portrait) {
    display: none !important;
  }
}

.hidden-portrait {
  @media (orientation: portrait) {
    display: none !important;
  }
}

.hidden-landscape {
  @media (orientation: landscape) {
    display: none !important;
  }
}

// Performance optimizations during orientation change
@media (prefers-reduced-motion: reduce) {
  .orientation-transition-smooth * {
    transition: none !important;
  }
}

// High contrast mode adaptations
@media (prefers-contrast: high) {
  .orientation-adaptive {
    border: 1px solid currentColor;
  }
}