class OrientationHandler{constructor(){this.currentOrientation=this.getOrientation(),this.isTransitioning=!1,this.transitionTimeout=null,this.init()}init(){this.bindEvents(),this.applyInitialClasses(),this.setupViewportHeightFix()}bindEvents(){window.addEventListener("orientationchange",()=>{this.handleOrientationChange()}),window.addEventListener("resize",()=>{this.handleResize()}),window.visualViewport&&window.visualViewport.addEventListener("resize",()=>{this.handleViewportResize()}),window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",t=>{this.handleDeviceOrientation(t)})}getOrientation(){return screen.orientation?screen.orientation.angle:void 0!==window.orientation?window.orientation:window.innerWidth>window.innerHeight?90:0}isPortrait(){const t=this.getOrientation();return 0===t||180===t}isLandscape(){const t=this.getOrientation();return 90===t||-90===t}handleOrientationChange(){this.isTransitioning||(this.isTransitioning=!0,document.body.classList.add("orientation-transition"),this.transitionTimeout&&clearTimeout(this.transitionTimeout),this.transitionTimeout=setTimeout(()=>{this.updateOrientation()},100))}handleResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.getOrientation()!==this.currentOrientation&&this.updateOrientation()},150)}handleViewportResize(){const t=window.visualViewport.height<.75*window.innerHeight;document.body.classList.toggle("keyboard-open",t),t?this.adjustForKeyboard():this.restoreFromKeyboard()}handleDeviceOrientation(t){const{alpha:e,beta:i,gamma:n}=t;let a;a=Math.abs(n)>Math.abs(i)?n>0?90:-90:i>0?180:0,a!==this.currentOrientation&&(this.currentOrientation=a,this.updateOrientationClasses())}updateOrientation(){const t=this.getOrientation();t!==this.currentOrientation&&(this.currentOrientation=t,this.updateOrientationClasses()),this.updateViewportHeight(),this.notifyComponents(),setTimeout(()=>{document.body.classList.remove("orientation-transition"),this.isTransitioning=!1},300)}updateOrientationClasses(){const t=document.body;t.classList.remove("portrait","landscape","landscape-left","landscape-right"),this.isPortrait()?t.classList.add("portrait"):this.isLandscape()&&(t.classList.add("landscape"),90===this.currentOrientation?t.classList.add("landscape-left"):-90===this.currentOrientation&&t.classList.add("landscape-right")),this.addDeviceSpecificClasses()}addDeviceSpecificClasses(){const t=document.body,{innerWidth:e,innerHeight:i}=window;i<=667&&e<=375?t.classList.add("small-screen-optimize"):t.classList.remove("small-screen-optimize"),i>=800?t.classList.add("tall-screen-optimize"):t.classList.remove("tall-screen-optimize"),window.screen&&window.screen.isExtended&&t.classList.add("foldable-device")}applyInitialClasses(){this.updateOrientationClasses(),this.addAdaptiveClasses()}addAdaptiveClasses(){document.querySelectorAll("table, .table-container").forEach(t=>{t.classList.add("table-orientation-adaptive")}),document.querySelectorAll("form, .form-container").forEach(t=>{t.classList.add("form-orientation-adaptive")}),document.querySelectorAll(".chart-container").forEach(t=>{t.classList.add("chart-orientation-adaptive")}),document.querySelectorAll(".toast, .alert").forEach(t=>{t.classList.add("notification-orientation-adaptive")})}setupViewportHeightFix(){const t=()=>{const t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`)};t(),window.addEventListener("resize",t)}updateViewportHeight(){const t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`),document.querySelectorAll(".viewport-height-adaptive").forEach(t=>{t.style.height=`${window.innerHeight}px`})}adjustForKeyboard(){document.querySelectorAll(".modal.show").forEach(t=>{const e=t.querySelector(".modal-body");e&&(e.style.paddingBottom="50vh")}),document.querySelectorAll(".bottom-sheet.active").forEach(t=>{t.style.transform="translateY(-30vh)"}),document.querySelectorAll(".fab").forEach(t=>{t.style.bottom="60vh"})}restoreFromKeyboard(){document.querySelectorAll(".modal .modal-body").forEach(t=>{t.style.paddingBottom=""}),document.querySelectorAll(".bottom-sheet").forEach(t=>{t.style.transform=""}),document.querySelectorAll(".fab").forEach(t=>{t.style.bottom=""})}notifyComponents(){window.dispatchEvent(new Event("resize")),document.dispatchEvent(new CustomEvent("orientationchange",{detail:{orientation:this.currentOrientation,isPortrait:this.isPortrait(),isLandscape:this.isLandscape()}})),this.resizeCharts(),this.recalculateTableLayouts(),this.updateModalLayouts()}resizeCharts(){window.Chart&&Object.values(window.Chart.instances).forEach(t=>{t&&t.resize&&setTimeout(()=>t.resize(),100)}),document.querySelectorAll("canvas[data-chart]").forEach(t=>{t.chart&&t.chart.resize&&setTimeout(()=>t.chart.resize(),100)})}recalculateTableLayouts(){document.querySelectorAll(".table-responsive").forEach(t=>{const e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}),window.innerWidth<=768&&document.querySelectorAll(".mobile-table-card").forEach(t=>{t.classList.add("orientation-animate"),setTimeout(()=>{t.classList.remove("orientation-animate")},300)})}updateModalLayouts(){document.querySelectorAll(".modal.show").forEach(t=>{const e=t.querySelector(".modal-dialog");e&&(e.style.transform="none",e.offsetHeight,e.style.transform="")})}getCurrentOrientation(){return this.currentOrientation}isCurrentlyPortrait(){return this.isPortrait()}isCurrentlyLandscape(){return this.isLandscape()}forceUpdate(){this.updateOrientation()}}document.addEventListener("DOMContentLoaded",()=>{window.orientationHandler=new OrientationHandler}),window.OrientationHandler=OrientationHandler;