class ModernApp{constructor(){this.init()}init(){this.initializeComponents(),this.setupEventListeners(),this.initializeAnimations(),this.setupTheme()}initializeComponents(){"undefined"!=typeof AOS&&AOS.init({duration:600,easing:"ease-in-out",once:!0,mirror:!1}),this.initializeTooltips(),this.initializeModals(),this.initializeDropdowns(),this.initializeSidebar(),this.initializeSearch(),this.initializeNotifications()}initializeTooltips(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(e){return new bootstrap.Tooltip(e)})}initializeModals(){document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("show.bs.modal",t=>{e.classList.add("animate-fade-in")}),e.addEventListener("hidden.bs.modal",t=>{e.classList.remove("animate-fade-in")})})}initializeDropdowns(){document.querySelectorAll(".dropdown-toggle").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.nextElementSibling;i&&i.classList.contains("dropdown-menu")&&i.classList.toggle("show")})}),document.addEventListener("click",e=>{e.target.closest(".dropdown")||document.querySelectorAll(".dropdown-menu.show").forEach(e=>{e.classList.remove("show")})})}initializeSidebar(){document.querySelector(".sidebar");const e=document.querySelector(".sidebar-toggle"),t=document.querySelector(".sidebar-overlay");e&&e.addEventListener("click",()=>{this.toggleSidebar()}),t&&t.addEventListener("click",()=>{this.closeSidebar()}),this.handleResponsiveSidebar()}toggleSidebar(){const e=document.querySelector(".sidebar"),t=document.querySelector(".sidebar-overlay");e&&(e.classList.toggle("show"),t&&t.classList.toggle("show"))}closeSidebar(){const e=document.querySelector(".sidebar"),t=document.querySelector(".sidebar-overlay");e&&(e.classList.remove("show"),t&&t.classList.remove("show"))}handleResponsiveSidebar(){const e=window.matchMedia("(max-width: 991.98px)"),t=e=>{e.matches||this.closeSidebar()};e.addListener(t),t(e)}initializeSearch(){document.querySelectorAll(".search-input").forEach(e=>{let t;e.addEventListener("input",e=>{clearTimeout(t),t=setTimeout(()=>{this.performSearch(e.target.value)},300)}),e.addEventListener("focus",()=>{const t=e.parentElement.querySelector(".search-results");t&&e.value.length>0&&(t.style.display="block")}),e.addEventListener("blur",()=>{setTimeout(()=>{const t=e.parentElement.querySelector(".search-results");t&&(t.style.display="none")},200)})})}performSearch(e){e.length<2||(console.log("Searching for:",e),this.showSearchLoading(),setTimeout(()=>{this.showSearchResults([{symbol:"AAPL",name:"Apple Inc.",price:"$150.25"},{symbol:"GOOGL",name:"Alphabet Inc.",price:"$2,750.80"}])},500))}showSearchLoading(){const e=document.querySelector(".search-results");e&&(e.innerHTML='<div class="loading-state"><div class="loading-spinner"></div><span>Searching...</span></div>',e.style.display="block")}showSearchResults(e){const t=document.querySelector(".search-results");if(t){if(0===e.length)t.innerHTML='<div class="no-results">No stocks found</div>';else{const i=e.map(e=>`\n                <div class="search-result-item" data-symbol="${e.symbol}">\n                    <span class="result-symbol">${e.symbol}</span>\n                    <span class="result-name">${e.name}</span>\n                    <span class="result-price">${e.price}</span>\n                </div>\n            `).join("");t.innerHTML=i}t.style.display="block"}}initializeNotifications(){window.NotificationManager=new NotificationManager}initializeAnimations(){document.querySelectorAll(".stagger-animation").forEach(e=>{const t=e.children;Array.from(t).forEach((e,t)=>{e.style.animationDelay=.1*t+"s"})}),this.setupIntersectionObserver()}setupIntersectionObserver(){const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("animate-slide-up")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".animate-on-scroll").forEach(t=>{e.observe(t)})}setupTheme(){const e=document.querySelector(".theme-toggle");e&&e.addEventListener("click",()=>{this.toggleTheme()}),this.loadTheme()}toggleTheme(){const e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),this.updateThemeToggleIcon(e)}loadTheme(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e),this.updateThemeToggleIcon(e)}updateThemeToggleIcon(e){const t=document.querySelector(".theme-toggle i");t&&(t.className="dark"===e?"fas fa-sun":"fas fa-moon")}setupEventListeners(){document.addEventListener("DOMContentLoaded",()=>{this.handlePageLoad()}),window.addEventListener("resize",()=>{this.handleResize()}),document.addEventListener("submit",e=>{e.target.classList.contains("ajax-form")&&(e.preventDefault(),this.handleAjaxForm(e.target))}),document.addEventListener("click",e=>{e.target.classList.contains("btn-loading")&&this.handleLoadingButton(e.target)})}handlePageLoad(){document.body.classList.add("page-loaded"),this.initializePageSpecific()}handleResize(){this.handleResponsiveSidebar()}handleAjaxForm(e){const t=new FormData(e),i=e.action||window.location.href,a=e.method||"POST",n=e.querySelector('button[type="submit"]');n&&(n.classList.add("loading"),n.disabled=!0),fetch(i,{method:a,body:t,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>e.json()).then(e=>{e.success?(NotificationManager.show(e.message||"Success!","success"),e.redirect&&(window.location.href=e.redirect)):NotificationManager.show(e.message||"An error occurred","error")}).catch(e=>{console.error("Error:",e),NotificationManager.show("An error occurred","error")}).finally(()=>{n&&(n.classList.remove("loading"),n.disabled=!1)})}handleLoadingButton(e){e.classList.add("loading"),setTimeout(()=>{e.classList.remove("loading")},2e3)}initializePageSpecific(){switch(document.body.getAttribute("data-page")){case"dashboard":this.initializeDashboard();break;case"leaderboard":this.initializeLeaderboard();break;case"login":this.initializeLogin()}}initializeDashboard(){console.log("Initializing dashboard..."),"undefined"!=typeof Chart&&this.initializeCharts(),this.initializeRealTimeUpdates()}initializeLeaderboard(){console.log("Initializing leaderboard..."),this.initializeDataTables()}initializeLogin(){console.log("Initializing login..."),this.initializeFormValidation()}initializeCharts(){console.log("Charts available, initializing...")}initializeRealTimeUpdates(){console.log("Initializing real-time updates...")}initializeDataTables(){console.log("Initializing data tables...")}initializeFormValidation(){console.log("Initializing form validation...")}}class NotificationManager{constructor(){this.container=this.createContainer()}createContainer(){let e=document.querySelector(".toast-container");return e||(e=document.createElement("div"),e.className="toast-container",document.body.appendChild(e)),e}show(e,t="info",i=5e3){const a=this.createToast(e,t);return this.container.appendChild(a),setTimeout(()=>a.classList.add("show"),100),setTimeout(()=>this.remove(a),i),a}createToast(e,t){const i=document.createElement("div");i.className=`toast toast-${t}`;const a={success:"fas fa-check-circle",error:"fas fa-exclamation-circle",warning:"fas fa-exclamation-triangle",info:"fas fa-info-circle"};return i.innerHTML=`\n            <div class="toast-content">\n                <i class="${a[t]||a.info} toast-icon"></i>\n                <span class="toast-message">${e}</span>\n            </div>\n            <button class="toast-close" onclick="this.parentElement.remove()">&times;</button>\n            <div class="toast-progress"></div>\n        `,i}remove(e){e.classList.add("hide"),setTimeout(()=>{e.parentElement&&e.parentElement.removeChild(e)},300)}}document.addEventListener("DOMContentLoaded",()=>{window.ModernApp=new ModernApp}),"undefined"!=typeof module&&module.exports&&(module.exports={ModernApp:ModernApp,NotificationManager:NotificationManager});