@{
    var currentController = ViewContext.RouteData.Values["Controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["Action"]?.ToString();
}

<nav class="sidebar mobile-nav nav-orientation-adaptive" 
     id="sidebar" 
     role="navigation" 
     aria-label="Main navigation"
     aria-hidden="false">
    <div class="sidebar-header safe-area-top">
        <div class="logo-container">
            <i class="fas fa-chart-line logo-icon" aria-hidden="true"></i>
            <span class="logo-text">SuperStock</span>
        </div>
        <button class="sidebar-toggle d-lg-none touch-target touch-feedback" 
                id="sidebarToggle"
                aria-label="Close navigation menu"
                aria-expanded="true">
            <i class="fas fa-times" aria-hidden="true"></i>
            <span class="sr-only">Close Menu</span>
        </button>
    </div>
    
    <div class="sidebar-content">
        <ul class="nav-menu" role="menubar" id="main-navigation">
            <li class="nav-item nav-item-touch @(currentController == "Home" && currentAction == "Index" ? "active" : "")" role="none">
                <a href="@Url.Action("Index", "Home")" 
                   class="nav-link sidebar-link touch-feedback" 
                   data-ripple="true"
                   role="menuitem"
                   @(currentController == "Home" && currentAction == "Index" ? "aria-current=\"page\"" : "")
                   aria-label="Dashboard - View your portfolio and trading overview">
                    <i class="fas fa-chart-line nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">Dashboard</span>
                </a>
            </li>
            
            <li class="nav-item nav-item-touch @(currentController == "Home" && currentAction == "Leaderboard" ? "active" : "")" role="none">
                <a href="@Url.Action("Leaderboard", "Home")" 
                   class="nav-link sidebar-link touch-feedback" 
                   data-ripple="true"
                   role="menuitem"
                   @(currentController == "Home" && currentAction == "Leaderboard" ? "aria-current=\"page\"" : "")
                   aria-label="Leaderboard - View competition rankings and performance">
                    <i class="fas fa-trophy nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">Leaderboard</span>
                </a>
            </li>
            
            <li class="nav-item nav-item-touch @(currentController == "Home" && currentAction == "Competition" ? "active" : "")" role="none">
                <a href="@Url.Action("Competition", "Home")" 
                   class="nav-link sidebar-link touch-feedback" 
                   data-ripple="true"
                   role="menuitem"
                   @(currentController == "Home" && currentAction == "Competition" ? "aria-current=\"page\"" : "")
                   aria-label="Competition - View competition details and rules">
                    <i class="fas fa-users nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">Competition</span>
                </a>
            </li>
            
            <li class="nav-item nav-item-touch @(currentController == "Home" && currentAction == "Privacy" ? "active" : "")" role="none">
                <a href="@Url.Action("Privacy", "Home")" 
                   class="nav-link sidebar-link touch-feedback" 
                   data-ripple="true"
                   role="menuitem"
                   @(currentController == "Home" && currentAction == "Privacy" ? "aria-current=\"page\"" : "")
                   aria-label="Privacy Policy - View privacy policy and data usage information">
                    <i class="fas fa-shield-alt nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">Privacy</span>
                </a>
            </li>
        </ul>
        
        @if (User.Identity.IsAuthenticated)
        {
            <div class="sidebar-footer safe-area-bottom">
                <div class="user-info" role="group" aria-label="User information">
                    <div class="user-avatar" aria-hidden="true">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="sidebar-username">@User.Identity.Name</span>
                        <span class="user-status" aria-label="User status: Online">Online</span>
                    </div>
                </div>
                <div class="user-actions">
                    <a href="@Url.Action("Logout", "User")" 
                       class="logout-btn touch-target touch-feedback" 
                       title="Logout"
                       aria-label="Logout from SuperStock"
                       aria-describedby="sidebar-username">
                        <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                        <span class="sr-only">Logout</span>
                    </a>
                </div>
            </div>
        }
    </div>
</nav>

<!-- Mobile overlay -->
<div class="sidebar-overlay mobile-nav-overlay d-lg-none" 
     id="sidebarOverlay"
     aria-hidden="true"
     role="presentation"></div>